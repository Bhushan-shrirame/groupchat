{"version":3,"sources":["firebase.js","contexts/AuthContext.js","components/Chats.js","components/Login.js","components/App.js","index.js"],"names":["auth","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","AuthContext","React","createContext","AuthProvider","children","useState","loading","setLoading","user","setUser","history","useHistory","useEffect","onAuthStateChanged","push","value","Provider","Chats","didMountRef","useRef","useContext","a","signOut","url","fetch","response","blob","data","File","type","current","axios","get","headers","email","uid","then","catch","e","formdata","FormData","append","getFile","photoURL","avatar","name","post","console","log","className","onClick","height","projectID","userName","userSecret","Login","id","signInWithRedirect","GoogleAuthProvider","GoogleOutlined","FacebookAuthProvider","FacebookOutlined","App","style","fontFamily","path","component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.2a3e9654.chunk.js","sourcesContent":["import firebase from \"firebase/app\";\nimport \"firebase/auth\";\n\nexport const auth = firebase.initializeApp({\n    apiKey: \"AIzaSyCuFsDUFaNNRcSDRmt8eCZTMOIQKvDSphU\",\n    authDomain: \"unichat-4ae20.firebaseapp.com\",\n    projectId: \"unichat-4ae20\",\n    storageBucket: \"unichat-4ae20.appspot.com\",\n    messagingSenderId: \"443815408151\",\n    appId: \"1:443815408151:web:deac478181b173047e2252\"\n  }).auth();\n\n  export default auth;","import React, { useState, useContext, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { auth } from \"../firebase\";\n\nconst AuthContext = React.createContext();\n\nexport const useAuth = () => useContext(AuthContext);\n\nexport const AuthProvider = ({children}) => {\n    const [loading, setLoading] = useState(true);\n    const [user, setUser] = useState(null);\n    const history = useHistory();\n\n    useEffect(() => {\n        auth.onAuthStateChanged((user) => {\n            setUser(user);\n            setLoading(false);\n            \n            if (user) history.push(\"/chats\");\n        })\n    }, [user, history]);\n\n    const value = { user };\n\n    return (\n        <AuthContext.Provider value={value}>\n            {!loading && children}\n        </AuthContext.Provider>\n    );\n}","import React, { useRef,useState, useEffect} from \"react\";\nimport axios from \"axios\";\nimport { useHistory } from \"react-router-dom\";\nimport { ChatEngine } from \"react-chat-engine\";\nimport { auth } from \"../firebase\";\n\nimport { useAuth } from \"../contexts/AuthContext\";\n\n\nexport default function Chats() {\n    const didMountRef = useRef(false)\n    const [loading, setLoading] = useState(true)\n    const { user } = useAuth()\n    const history = useHistory()\n    \n   \n    async function handleLogout()  {\n        await auth.signOut();\n\n        history.push(\"/\");\n    }\n\n    async function getFile(url) {\n        let response = await fetch(url);\n        let data = await response.blob();\n\n        return new File ([data], \"userPhoto.jpg\", {type: \"image/jpeg\"});\n    }\n\n    useEffect(() => {\n        if (!didMountRef.current){\n            didMountRef.current = true\n        }\n        if(!user || user === null){\n            history.push(\"/\")\n\n            return\n        }\n\n        axios.get( \n            'https://api.chatengine.io/users/me/', \n            { headers: {\n                \"project-id\": 'a8a9025f-0afe-4d93-b181-2e4e7430be69',\n                \"user-name\": user.email,\n                \"user-secret\": user.uid\n            }}\n        \n        )\n        .then(() => {setLoading(false);\n\n        })\n        .catch(e => {\n            let formdata = new FormData()\n            formdata.append(\"email\", user.email)\n            formdata.append(\"username\", user.email)\n            formdata.append(\"secret\", user.uid)\n\n            getFile(user.photoURL)\n                .then((avatar) => {\n                    formdata.append(\"avatar\", avatar, avatar.name)\n\n                    axios.post(\n                        'https://api.chatengine.io/users/',\n                        formdata,\n                        {headers: {\"private-key\": '8b868a17-389b-4fd2-bf00-cc3cae99cd39'}}\n                    )\n\n                    .then(() => setLoading(false))\n                    .catch(e => console.log(\"e\", e.response))\n                })\n        })\n\n    }, [user, history]);\n\n    if (!user || loading) return <div />\n\n    return (\n        <div className=\"chats-page\">\n            <div className=\"nav-bar\">\n                <div className=\"logo-tab\">\n                    Groupchat\n                </div>\n\n                <div onClick={handleLogout} className=\"logout-tab\">\n                    Logout\n                </div>\n\n            </div>\n\n            <ChatEngine \n                height=\"calc(100vh - 66px)\"\n                projectID= 'a8a9025f-0afe-4d93-b181-2e4e7430be69'\n                userName={user.email}\n                userSecret={user.uid}\n            />\n\n        </div>\n    )\n}\n","import React from \"react\";\nimport {GoogleOutlined, FacebookOutlined } from \"@ant-design/icons\";\nimport \"firebase/app\";\nimport { auth } from \"../firebase\";\n\nimport firebase from \"firebase/app\";\n\n\nconst Login = () =>{\n    return (\n        <div id=\"login-page\">\n            <div id=\"login-card\">\n                <h2>Welcome to Groupchat!</h2>\n\n                <div\n                    className=\"login-button google\"\n                    onClick={() => auth.signInWithRedirect(new firebase.auth.GoogleAuthProvider())}\n                >\n                    <GoogleOutlined /> Sign In with Google\n                </div>\n\n                <br /> <br  />\n\n                <div\n                    className=\"login-button facebook\"\n                    onClick={() => auth.signInWithRedirect(new firebase.auth.FacebookAuthProvider())}\n                >\n                    <FacebookOutlined /> Sign In with Facebook\n                </div>\n                \n            </div>\n\n        </div>\n    );\n}\n\nexport default Login;","import React from \"react\"\n\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\"\n\nimport { AuthProvider } from \"../contexts/AuthContext\"\n\nimport Chats from \"./Chats\"\nimport Login from \"./Login\"\n\nfunction App() {\n  return (\n    <div style={{ fontFamily: 'Avenir' }}>\n      <Router>\n        <AuthProvider>\n          <Switch>\n            <Route path=\"/chats\" component={Chats} />\n            <Route path=\"/\" component={Login} />\n          </Switch>\n        </AuthProvider>\n      </Router>\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}